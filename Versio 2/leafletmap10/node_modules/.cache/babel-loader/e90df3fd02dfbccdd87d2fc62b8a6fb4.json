{"ast":null,"code":"var request = require('./request');\n\nvar React = require('react');\n\nvar PropTypes = React.PropTypes;\nvar Ajax = React.createClass({\n  propTypes: {\n    onResponse: PropTypes.func,\n    // Fired whenever a response or an error is received.\n    url: PropTypes.string,\n    method: PropTypes.string,\n    // The HTTP method to use such as 'GET', 'POST', 'PUT', or 'DELETE'. Default is 'GET'.\n    params: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\n    // Parameters to send to the specified URL, as JSON.\n    body: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\n    // Optional raw body content to send when method === \"POST\".\n    headers: PropTypes.object,\n    // HTTP request headers to send.\n    type: PropTypes.string,\n    accept: PropTypes.string,\n    timeout: PropTypes.number,\n    withCredentials: PropTypes.bool // Set the withCredentials flag on the request.\n\n  },\n  getDefaultProps: function () {\n    return {\n      method: 'GET',\n      onResponse: function () {}\n    };\n  },\n  request: function () {\n    var url = this.props.url;\n    var method = this.props.method.toLowerCase();\n    var params = this.props.params;\n    var body = this.props.body;\n    var headers = this.props.headers;\n    var type = this.props.type;\n    var accept = this.props.accept;\n    var withCredentials = this.props.withCredentials;\n    var timeout = this.props.timeout;\n    var handler = this.props.onResponse;\n    var req = request(method, url);\n\n    if (withCredentials) {\n      req.withCredentials();\n    }\n\n    if (type) {\n      req.type(type);\n    }\n\n    if (headers) {\n      req.set(headers);\n    }\n\n    if (accept) {\n      req.accept(accept);\n    }\n\n    if (params) {\n      req.query(params);\n    }\n\n    if (body) {\n      req.send(body);\n    }\n\n    if (timeout) {\n      req.timeout(timeout);\n    }\n\n    return req.end(handler);\n  },\n  // Invoked immediately before mounting occurs.\n  componentWillMount: function () {\n    this.request();\n  },\n  render: function () {\n    return null;\n  }\n});\nmodule.exports = Ajax;","map":null,"metadata":{},"sourceType":"script"}